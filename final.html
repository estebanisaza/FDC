<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Esne paratus?.</title>
    <link rel="icon" type="image/png" href="./images/calavera-y-huesos.png" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="latin-phrase glitch">Esne paratus?</div>
    <div class="countdown" id="display">00:00:00</div>

    <div id="parpadeo-fullscreen">
      <img id="imagen-parpadeo" src="images/satanics.jpg" alt="???" />
    </div>

    <audio
      id="sonido-parpadeo"
      src="./sounds/VetitasInv.mp3"
      preload="auto"
    ></audio>

    <script>
      const fechaObjetivo = new Date("2025-07-24T21:00:00");
      let intervalo;

      function iniciarCuentaRegresiva() {
        clearInterval(intervalo);
        intervalo = setInterval(() => {
          const ahora = new Date();
          const diferencia = fechaObjetivo - ahora;

          if (diferencia <= 0) {
            document.getElementById("display").textContent = "00:00:00";
            clearInterval(intervalo);
            return;
          }

          const totalSegundos = Math.floor(diferencia / 1000);
          const horas = Math.floor(totalSegundos / 3600);
          const minutos = Math.floor((totalSegundos % 3600) / 60);
          const segundos = totalSegundos % 60;

          const formato = (n) => n.toString().padStart(2, "0");
          document.getElementById("display").textContent = `${formato(
            horas
          )}:${formato(minutos)}:${formato(segundos)}`;
        }, 1000);
      }

      iniciarCuentaRegresiva();

      function iniciarParpadeoPantallaCompleta() {
        const contenedor = document.getElementById("parpadeo-fullscreen");
        const sonido = document.getElementById("sonido-parpadeo");

        setInterval(() => {
          sonido.currentTime = 0;
          sonido
            .play()
            .catch((e) => console.warn("ReproducciÃ³n bloqueada:", e));
          contenedor.style.opacity = "1";

          setTimeout(() => {
            contenedor.style.opacity = "0";
          }, 1500);
        }, 30000);
      }

      iniciarParpadeoPantallaCompleta();

      document.body.appendChild(contenedor);

      setTimeout(() => {
        contenedor.remove();
      }, 15000);
    </script>
  </body>
</html>
